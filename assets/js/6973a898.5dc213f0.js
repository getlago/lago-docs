"use strict";(self.webpackChunklago_doc=self.webpackChunklago_doc||[]).push([[9848],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=a.createContext({}),c=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},s=function(e){var t=c(e.components);return a.createElement(d.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,d=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=o,h=u["".concat(d,".").concat(m)]||u[m]||p[m]||i;return n?a.createElement(h,r(r({ref:t},s),{},{components:n})):a.createElement(h,r({ref:t},s))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8757:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var a=n(7462),o=(n(7294),n(3905));const i={sidebar_position:12},r="Credit notes",l={unversionedId:"guide/credit_notes",id:"guide/credit_notes",title:"Credit notes",description:"Lago may automatically generate a credit note when a subscription is upgraded or downgraded. However, only users with a premium license can manually generate credit notes via the user interface or the API. Please contact us to get access to Lago Cloud and Lago Self-Hosted Premium.",source:"@site/docs/guide/12_credit_notes.md",sourceDirName:"guide",slug:"/guide/credit_notes",permalink:"/docs/guide/credit_notes",draft:!1,tags:[],version:"current",sidebarPosition:12,frontMatter:{sidebar_position:12},sidebar:"guide",previous:{title:"Payment retries",permalink:"/docs/guide/payments/payment-retries"},next:{title:"Prepaid credits",permalink:"/docs/guide/prepaid_credits"}},d={},c=[{value:"Create credit notes",id:"create-credit-notes",level:2},{value:"Credit methods",id:"credit-methods",level:2},{value:"Refund",id:"refund",level:3},{value:"Credit note wallet",id:"credit-note-wallet",level:3}],s={toc:c};function p(e){let{components:t,...i}=e;return(0,o.kt)("wrapper",(0,a.Z)({},s,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"credit-notes"},"Credit notes"),(0,o.kt)("admonition",{title:"Premium feature \u2728",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Lago may automatically generate a credit note when a subscription is upgraded or downgraded. However, only users with a premium license can manually generate credit notes via the user interface or the API. Please ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"mailto:hello@getlago.com"},"contact us"))," to get access to Lago Cloud and Lago Self-Hosted Premium.")),(0,o.kt)("p",null,"You can issue a credit note to refund or credit back a customer's account. Credit notes can be issued for invoices related to subscriptions and add-ons, but not for invoices related to credit purchases."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Credit notes can only be issued for invoices with the status ",(0,o.kt)("inlineCode",{parentName:"p"},"finalized")," and an amount greater than zero.")),(0,o.kt)("h2",{id:"create-credit-notes"},"Create credit notes"),(0,o.kt)("p",null,"To create a credit note through the user interface:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Go to the ",(0,o.kt)("strong",{parentName:"li"},'"Customers"')," section;"),(0,o.kt)("li",{parentName:"ol"},"Select a customer to open the customer view;"),(0,o.kt)("li",{parentName:"ol"},"Open the ",(0,o.kt)("strong",{parentName:"li"},'"Invoices"')," tab;"),(0,o.kt)("li",{parentName:"ol"},"Click an invoice to see its details; and"),(0,o.kt)("li",{parentName:"ol"},"Select ",(0,o.kt)("strong",{parentName:"li"},'"Issue a credit note"')," from the ",(0,o.kt)("strong",{parentName:"li"},'"Actions"')," dropdown (upper right corner).")),(0,o.kt)("p",null,"The credit note creation process varies depending on the payment status of the invoice:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"If the payment status of the invoice is ",(0,o.kt)("inlineCode",{parentName:"li"},"pending")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"failed"),", the credit note will allow you to credit back the customer's account; and"),(0,o.kt)("li",{parentName:"ul"},"If the payment status of the invoice is ",(0,o.kt)("inlineCode",{parentName:"li"},"succeeded"),", the credit note will allow you to credit back the customer's account and/or refund them.")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Coupons and prepaid credits cannot be refunded, they can only be credited back to the customer's account.")),(0,o.kt)("p",null,"To issue a credit note:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Select a reason from the list (e.g. duplicate charge, order cancelation, etc.);"),(0,o.kt)("li",{parentName:"ol"},"Add an internal note (optional);"),(0,o.kt)("li",{parentName:"ol"},"Select the item(s) and enter the amount(s) you want to credit;"),(0,o.kt)("li",{parentName:"ol"},"Select the credit method(s) (only available for paid invoices - ",(0,o.kt)("a",{parentName:"li",href:"#credit-methods"},"learn more"),"); and"),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},'"Issue credit note"')," to confirm.")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"For each item, you must enter a credit amount equal to or less than the initial amount of the item, excluding tax. The total amount of the credit note cannot exceed the total amount of the invoice.")),(0,o.kt)("p",null,"When the credit note is created, it will appear below the original invoice on the invoice details page and in the ",(0,o.kt)("strong",{parentName:"p"},'"Credit notes"')," tab of the customer view. In addition to this, a ",(0,o.kt)("inlineCode",{parentName:"p"},"credit_note.created")," ",(0,o.kt)("a",{parentName:"p",href:"../api/webhooks/messages"},"webhook")," will automatically be sent by Lago."),(0,o.kt)("p",null,"You can link several credit notes to an invoice. Like invoices, credit notes have a unique number and can be downloaded in PDF format."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Credit note details",src:n(3388).Z,width:"2880",height:"1568"})),(0,o.kt)("h2",{id:"credit-methods"},"Credit methods"),(0,o.kt)("h3",{id:"refund"},"Refund"),(0,o.kt)("p",null,"When a credit note involves a refund, the amount of the refund will be included in the ",(0,o.kt)("inlineCode",{parentName:"p"},"credit_note.created")," ",(0,o.kt)("a",{parentName:"p",href:"../api/webhooks/messages"},"webhook"),", which will allow you to proceed with the payment."),(0,o.kt)("p",null,"The credit note will also feature a ",(0,o.kt)("inlineCode",{parentName:"p"},"refund_status")," that can be ",(0,o.kt)("inlineCode",{parentName:"p"},"pending"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"succeeded")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"failed"),". You can update the status of the refund via the API."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"If you use one of our native payment integrations, the refund process will automatically be triggered by Lago.")),(0,o.kt)("h3",{id:"credit-note-wallet"},"Credit note wallet"),(0,o.kt)("p",null,"The amount of the credit note that is not refunded is credited to the customer's account via a credit note wallet. The credit amount is included in the ",(0,o.kt)("inlineCode",{parentName:"p"},"credit_note.created")," ",(0,o.kt)("a",{parentName:"p",href:"../api/webhooks/messages"},"webhook")," and displayed on the credit note details page."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"A credit note wallet is linked to a single credit note and therefore, to a single invoice. If there are several credit notes linked to the customer's account, Lago will create a credit note wallet for each of them."),(0,o.kt)("p",{parentName:"admonition"},"Credit note wallets are different from wallets associated with ",(0,o.kt)("a",{parentName:"p",href:"prepaid_credits"},"prepaid credits"),".")),(0,o.kt)("p",null,"The total amount available in the credit note wallets will be deducted from the subtotal of the customer's next invoice(s), after tax (see below)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"EXAMPLE OF INVOICE\n-----------------------------\nAll subscriptions = $50\nAll usage-based fees = $20\n-----------------------------\nSubtotal (excl. tax) = $70\nTax (10%) = $7\n-----------------------------\nSubtotal (incl. tax) = $77\nCredit notes = $20\nCoupons = $10\nPrepaid credits = $30\n-----------------------------\nTotal due = $17\n")),(0,o.kt)("p",null,"When the credit note wallet is created, the initial ",(0,o.kt)("inlineCode",{parentName:"p"},"credit_status")," is ",(0,o.kt)("inlineCode",{parentName:"p"},"available"),". Then when the amount of the credit note wallet is zero, the status switches to ",(0,o.kt)("inlineCode",{parentName:"p"},"consumed"),"."),(0,o.kt)("p",null,"You can also void a credit note wallet. To do so:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Go to the ",(0,o.kt)("strong",{parentName:"li"},'"Customers"')," section;"),(0,o.kt)("li",{parentName:"ol"},"Select a customer to open the customer view;"),(0,o.kt)("li",{parentName:"ol"},"Open the ",(0,o.kt)("strong",{parentName:"li"},'"Credit notes"')," tab;"),(0,o.kt)("li",{parentName:"ol"},"Click a credit note to see its details; and"),(0,o.kt)("li",{parentName:"ol"},"Select ",(0,o.kt)("strong",{parentName:"li"},'"Void credit available"')," from the ",(0,o.kt)("strong",{parentName:"li"},'"Actions"')," dropdown (upper right corner).")),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"When voiding a credit note wallet, the remaining credit amount will be lost and the ",(0,o.kt)("inlineCode",{parentName:"p"},"credit_status")," will switch to ",(0,o.kt)("inlineCode",{parentName:"p"},"voided"),". This action cannot be canceled.")))}p.isMDXComponent=!0},3388:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/credit-note-39fd904adb8cc192e4e78320171c388f.png"}}]);