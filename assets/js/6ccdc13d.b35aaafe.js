"use strict";(self.webpackChunklago_doc=self.webpackChunklago_doc||[]).push([[4860],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,g=d["".concat(s,".").concat(m)]||d[m]||p[m]||o;return n?r.createElement(g,i(i({ref:t},u),{},{components:n})):r.createElement(g,i({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6330:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_position:13},i="Integration Testing",l={unversionedId:"guide/testing-integration",id:"guide/testing-integration",title:"Integration Testing",description:"This step-by-step integration guide will help you get started with Lago.",source:"@site/docs/guide/13_testing-integration.md",sourceDirName:"guide",slug:"/guide/testing-integration",permalink:"/docs/guide/testing-integration",draft:!1,tags:[],version:"current",sidebarPosition:13,frontMatter:{sidebar_position:13},sidebar:"guide",previous:{title:"Prepaid Credits",permalink:"/docs/guide/prepaid_credits"},next:{title:"Overview",permalink:"/docs/guide/alerting-system/overview"}},s={},c=[{value:"Foreword",id:"foreword",level:2},{value:"1. Define a billable metric",id:"1-define-a-billable-metric",level:2},{value:"2. Create a plan (with charges)",id:"2-create-a-plan-with-charges",level:2},{value:"3. Create a customer",id:"3-create-a-customer",level:2},{value:"4. Start a subscription",id:"4-start-a-subscription",level:2},{value:"5. Send usage-based events",id:"5-send-usage-based-events",level:2},{value:"6. Invoice your customers",id:"6-invoice-your-customers",level:2}],u={toc:c};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"integration-testing"},"Integration Testing"),(0,a.kt)("p",null,"This step-by-step integration guide will help you get started with Lago."),(0,a.kt)("h2",{id:"foreword"},"Foreword"),(0,a.kt)("p",null,"At the moment, each Lago account is associated with a unique environment. It is currently not possible to have your test environment and production environment in the same account."),(0,a.kt)("p",null,"However, we can suggest different workarounds:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Create two accounts"),' to get access to two environments, one that could be called "Company Staging" and another one that could be called "Company Production"; or')),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Leverage our two hosting solutions")," to use Lago Cloud as a test environment and Lago Open Source as a production environment (or vice versa)."))),(0,a.kt)("p",null,"Please note that the above workarounds will require you to replicate the same setup in both environments."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"In the future, you will be able to get access to a test environment and a production environment with the same Lago account.")),(0,a.kt)("h2",{id:"1-define-a-billable-metric"},"1. Define a billable metric"),(0,a.kt)("p",null,"To define a billable metric through the user interface:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"In the side menu, select ",(0,a.kt)("strong",{parentName:"li"},'"Billable metrics"'),";"),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},'"Add a billable metric"')," in the upper right corner;"),(0,a.kt)("li",{parentName:"ol"},"Fill in the form (",(0,a.kt)("a",{parentName:"li",href:"./billable-metrics/overview"},"learn more about billable metrics"),"); and"),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},'"Add billable metric"')," to save.")),(0,a.kt)("h2",{id:"2-create-a-plan-with-charges"},"2. Create a plan (with charges)"),(0,a.kt)("p",null,"To create a plan through the user interface:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"In the side menu, select ",(0,a.kt)("strong",{parentName:"li"},'"Plans"'),";"),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},'"Add a plan"')," in the upper right corner;"),(0,a.kt)("li",{parentName:"ol"},"Fill in the form (",(0,a.kt)("a",{parentName:"li",href:"./plans/overview"},"learn more about plans"),"); and"),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},'"Add plan"')," to save.")),(0,a.kt)("h2",{id:"3-create-a-customer"},"3. Create a customer"),(0,a.kt)("p",null,"To create a customer through the user interface:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"In the side menu, select ",(0,a.kt)("strong",{parentName:"li"},'"Customers"'),";"),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},'"Add a customer"')," in the upper right corner;"),(0,a.kt)("li",{parentName:"ol"},"Fill in the form in the pop-up window (",(0,a.kt)("a",{parentName:"li",href:"./customers"},"learn more about customers"),"); and"),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},'"Add customer"')," to save.")),(0,a.kt)("p",null,"You can also create customers through the API, as described in the ",(0,a.kt)("a",{parentName:"p",href:"../api/customers/create-update-customer"},"documentation"),"."),(0,a.kt)("h2",{id:"4-start-a-subscription"},"4. Start a subscription"),(0,a.kt)("p",null,"To start a subscription, you need to assign a plan to an existing customer. To do so through the user interface:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"In the side menu, select ",(0,a.kt)("strong",{parentName:"li"},'"Customers"'),";"),(0,a.kt)("li",{parentName:"ol"},"Select a customer from the list;"),(0,a.kt)("li",{parentName:"ol"},"On the right-hand side, click ",(0,a.kt)("strong",{parentName:"li"},'"Add a plan"'),";"),(0,a.kt)("li",{parentName:"ol"},"Select the plan you would like to assign to your customer; and"),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},'"Add plan"')," to confirm.")),(0,a.kt)("p",null,"A success toast will be displayed and the new subscription will appear in the customer view."),(0,a.kt)("p",null,"You can also start a subscription through the API, as described in the ",(0,a.kt)("a",{parentName:"p",href:"../api/subscriptions/create-subscription"},"documentation"),"."),(0,a.kt)("h2",{id:"5-send-usage-based-events"},"5. Send usage-based events"),(0,a.kt)("p",null,"Events sent from your backend to Lago will be automatically aggregated according to the predefined billable metrics. To start sending usage-based events, please refer to the ",(0,a.kt)("a",{parentName:"p",href:"../api/events/metered-event"},"API documentation"),"."),(0,a.kt)("h2",{id:"6-invoice-your-customers"},"6. Invoice your customers"),(0,a.kt)("p",null,"At the end of the billing period, Lago will automatically generate an invoice for each customer. Invoices will be sent to your application using webhooks. To define the URL to which the webhooks will be sent:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"In the side menu of the user interface, select ",(0,a.kt)("strong",{parentName:"li"},'"Developers"'),";"),(0,a.kt)("li",{parentName:"ol"},"On the right-hand side, click ",(0,a.kt)("strong",{parentName:"li"},'"Add a webhook"'),";"),(0,a.kt)("li",{parentName:"ol"},"Enter the URL of your application; and"),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},'"Add webhook"')," to confirm.")),(0,a.kt)("p",null,"To learn more about webhooks and invoices, please refer to the ",(0,a.kt)("a",{parentName:"p",href:"../api/invoices/invoice-object"},"API documentation"),"."))}p.isMDXComponent=!0}}]);