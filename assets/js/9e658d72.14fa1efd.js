"use strict";(self.webpackChunklago_doc=self.webpackChunklago_doc||[]).push([[196],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>_});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),d=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(u.Provider,{value:t},e.children)},s="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,u=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),s=d(n),m=r,_=s["".concat(u,".").concat(m)]||s[m]||p[m]||l;return n?a.createElement(_,o(o({ref:t},c),{},{components:n})):a.createElement(_,o({ref:t},c))}));function _(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=m;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[s]="string"==typeof e?e:r,o[1]=i;for(var d=2;d<l;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},84122:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>b,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var a=n(87462),r=(n(67294),n(3905));const l={sidebar_position:2},o="Messages",i={unversionedId:"api/webhooks/messages",id:"api/webhooks/messages",title:"Messages",description:"Here is the complete list of webhook messages sent by Lago.",source:"@site/docs/api/90_webhooks/messages.md",sourceDirName:"api/90_webhooks",slug:"/api/webhooks/messages",permalink:"/docs/api/webhooks/messages",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"api",previous:{title:"Format & Signature",permalink:"/docs/api/webhooks/message-signature"},next:{title:"Resources",permalink:"/docs/category/resources"}},u={},d=[{value:"Event ingestion",id:"event-ingestion",level:2},{value:"Invoices",id:"invoices",level:2},{value:"Subscriptions and fees",id:"subscriptions-and-fees",level:2},{value:"External payment providers",id:"external-payment-providers",level:2},{value:"Credit notes and refunds",id:"credit-notes-and-refunds",level:2}],c=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},s=c("Type"),p=c("NotNullable"),m={toc:d},_="wrapper";function b(e){let{components:t,...n}=e;return(0,r.kt)(_,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"messages"},"Messages"),(0,r.kt)("p",null,"Here is the complete list of webhook messages sent by Lago."),(0,r.kt)("h2",{id:"event-ingestion"},"Event ingestion"),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Event error")),"This webhook is sent when there is an error related to the creation of an event.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "event.error",\n  "object_type": "event_error",\n  "event_error": {\n    "status": 422,\n    "error": "Unprocessable entity",\n    "message": "code does not exist",\n    "input_params": {\n      "transaction_id": "__transaction_id__",\n      "external_customer_id": "customer123",\n      "code": "code123"\n    }\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"status")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"HTTP status of the error. Possible statuses are ",(0,r.kt)("inlineCode",{parentName:"td"},"404")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"422"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"error")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"HTTP error code. Possible errors are ",(0,r.kt)("inlineCode",{parentName:"td"},"Not found")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"Unprocessable entity"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"message")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Error code. See next list for the description of each error code.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"input_params")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"JSON")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"JSON provided at event creation")))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Code"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"billable_metric_not_found")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"404")),(0,r.kt)("td",{parentName:"tr",align:null},"No billable metric matches the given code")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"customer_not_found")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"404")),(0,r.kt)("td",{parentName:"tr",align:null},"No customer matches the external id")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"subscription_not_found")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"404")),(0,r.kt)("td",{parentName:"tr",align:null},"No subscription matches the given external subscription id")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"invalid_argument")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"422")),(0,r.kt)("td",{parentName:"tr",align:null},"No subscription matches the given external subscription id")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"invalid_recurring_resource")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"422")),(0,r.kt)("td",{parentName:"tr",align:null},"Provided recurring resource for persisted event is invalid"))))),(0,r.kt)("h2",{id:"invoices"},"Invoices"),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Draft invoice created")),"Sent when a new invoice is in draft.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "invoice.drafted",\n  "object_type": "invoice",\n  "invoice": {\n    "lago_id": "10pb140c-0e7a-44dc-bdff-b683d0770et9",\n    "sequential_id": 2,\n    "number": "LAG-1234-001-002",\n    "issuing_date": "2023-01-22",\n    "invoice_type": "subscription",\n    "status": "draft",\n    "payment_status": "pending",\n    "amount_cents": 5500,\n    "amount_currency": "USD",\n    "vat_amount_cents": 0,\n    "vat_amount_currency": "USD",\n    "credit_amount_cents": 0,\n    "credit_amount_currency": "USD",\n    "total_amount_cents": 5500,\n    "total_amount_currency": "USD",\n    "file_url": null,\n    "legacy": false,\n    "customer": {\n      "lago_id": "578df9d1-a5b5-abc4-b1cd-cc123159cdj3",\n      "external_id": "customer_1234",\n      "name": "Helen Ross",\n      "sequential_id": 26,\n      "slug": "LAG-X575-026",\n      "created_at": "2023-01-11T06:59:44Z",\n      "country": null,\n      "address_line1": null,\n      "address_line2": null,\n      "state": null,\n      "zipcode": null,\n      "email": null,\n      "city": null,\n      "url": null,\n      "phone": null,\n      "logo_url": null,\n      "legal_name": null,\n      "legal_number": null,\n      "currency": "USD",\n      "timezone": null,\n      "applicable_timezone": "Europe/Paris",\n      "billing_configuration": {\n        "invoice_grace_period": null,\n        "payment_provider": null,\n        "vat_rate": null\n      }\n    },\n    "subscriptions": [\n      {\n        "lago_id": "00911bba-d074-1234-abcd-00d4e57746mm",\n        "external_id": "07cc066d-1234-5678-xyzw-e42ea21e6307",\n        "lago_customer_id": "578df9d1-a5b5-abc4-b1cd-cc123159cdj3",\n        "external_customer_id": "customer_1234",\n        "name": "",\n        "plan_code": "corporate",\n        "status": "active",\n        "billing_time": "anniversary",\n        "subscription_at": "2023-01-17T15:44:16Z",\n        "started_at": "2023-01-17T15:44:16Z",\n        "terminated_at": null,\n        "canceled_at": null,\n        "created_at": "2023-01-17T15:44:39Z",\n        "previous_plan_code": null,\n        "next_plan_code": null,\n        "downgrade_plan_date": null,\n        "subscription_date": "2023-01-17"\n      }\n    ],\n    "fees": [\n      {\n        "lago_id": "12345678-ebea-47de-ghjk-bbbfd42755f3",\n        "lago_group_id": null,\n        "lago_true_up_fee_id": null,\n        "lago_true_up_parent_fee_id": null,\n        "item": {\n          "type": "subscription",\n          "code": "corporate",\n          "name": "Corporate"\n        },\n        "amount_cents": 5500,\n        "amount_currency": "USD",\n        "vat_amount_cents": 0,\n        "vat_amount_currency": "USD",\n        "total_amount_cents": 5500,\n        "total_amount_currency": "EUR",\n        "units": "1.0",\n        "events_count": null\n      }\n    ],\n    "credits": []\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"invoice")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"JSON")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not nullable")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"../invoices/invoice-object"},"Invoice object")))))),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Finalized invoice created")),"Sent when an invoice is finalized.",(0,r.kt)("p",null,"This will allow your application to proceed with the billing."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "invoice.created",\n  "object_type": "invoice",\n  "invoice": {\n    "lago_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "sequential_id": 2,\n    "number": "LAG-1234-001-002",\n    "issuing_date": "2022-04-29",\n    "invoice_type": "subscription",\n    "status": "finalized",\n    "payment_status": "succeeded",\n    "amount_cents": 100,\n    "amount_currency": "EUR",\n    "vat_amount_cents": 20,\n    "vat_amount_currency": "EUR",\n    "total_amount_cents": 120,\n    "total_amount_currency": "EUR",\n    "file_url": "https://getlago.com/invoice/file",\n    "customer": {\n      "lago_id": "99a6094e-199b-4101-896a-54e927ce7bd7",\n      "sequential_id": 1,\n      "slug": "LAG-1234-001",\n      "external_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n      "address_line1": "5230 Penfield Ave",\n      "address_line2": null,\n      "city": "Woodland Hills",\n      "country": "US",\n      "created_at": "2022-04-29T08:59:51Z",\n      "email": "dinesh@piedpiper.test",\n      "legal_name": "Coleman-Blair",\n      "legal_number": "49-008-2965",\n      "logo_url": "http://hooli.com/logo.png",\n      "name": "Gavin Belson",\n      "phone": "1-171-883-3711 x245",\n      "state": "CA",\n      "url": "http://hooli.com",\n      "vat_rate": 20.0,\n      "zipcode": "91364"\n    },\n    "subscriptions": [\n        {\n        "lago_id": "b7ab2926-1de8-4428-9bcd-779314ac129b",\n        "external_id": "susbcription_external_id",\n        "lago_customer_id": "99a6094e-199b-4101-896a-54e927ce7bd7",\n        "external_customer_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n        "canceled_at": "2022-04-29T08:59:51Z",\n        "created_at": "2022-04-29T08:59:51Z",\n        "plan_code": "new_code",\n        "started_at": "2022-04-29T08:59:51Z",\n        "status": "active",\n        "terminated_at": null\n      }\n    ],\n    "fees": [\n      {\n        "lago_id": "b7ab2926-1de8-4428-9bcd-779314ac129b",\n        "lago_group_id": null,\n        "lago_true_up_fee_id": null,\n        "lago_true_up_parent_fee_id": null,\n        "item": {\n          "type": "subscription",\n          "code": "plan_code",\n          "name": "Plan"\n        },\n        "amount_cents": 100,\n        "amount_currency": "EUR",\n        "vat_amount_cents": 20,\n        "vat_amount_currency": "EUR",\n        "total_amount_cents": 120,\n        "total_amount_currency": "EUR",\n        "units": "0.32",\n        "events_count": 23\n      }\n    ],\n    "credits": [\n      {\n        "lago_id": "b7ab2926-1de8-4428-9bcd-779314ac129b",\n        "item": {\n          "lago_id": "b7ab2926-1de8-4428-9bcd-779314ac129b",\n          "type": "coupon",\n          "code": "coupon_code",\n          "name": "Coupon"\n        },\n        "amount_cents": 100,\n        "amount_currency": "EUR"\n      }\n    ]\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"invoice")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"JSON")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not nullable")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"../invoices/invoice-object"},"Invoice object")))))),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"One-off invoice created")),"Sent when a one-off invoice is created. Only add-ons can be applied to one-off invoices.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "invoice.one_off_created",\n  "object_type": "invoice",\n  "invoice": {\n    "lago_id": "b7b6a31f-b81b-4ae5-a9c8-05c407e47416",\n    "sequential_id": 4,\n    "number": "ONE-0499-001-004",\n    "issuing_date": "2023-05-05",\n    "invoice_type": "one_off",\n    "status": "finalized",\n    "payment_status": "pending",\n    "currency": "USD",\n    "fees_amount_cents": 25000,\n    "vat_amount_cents": 2500,\n    "coupons_amount_cents": 0,\n    "credit_notes_amount_cents": 0,\n    "sub_total_vat_excluded_amount_cents": 25000,\n    "sub_total_vat_included_amount_cents": 27500,\n    "total_amount_cents": 27500,\n    "prepaid_credit_amount_cents": 0,\n    "file_url": null,\n    "version_number": 3,\n    "legacy": false,\n    "amount_currency": "USD",\n    "vat_amount_currency": "USD",\n    "credit_amount_currency": "USD",\n    "total_amount_currency": "USD",\n    "amount_cents": 25000,\n    "credit_amount_cents": 0,\n    "customer": {\n      "lago_id": "37cee916-5751-4665-9774-aa05bb1a2ffd",\n      "external_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n      "name": "Gavin Belson",\n      "sequential_id": 1,\n      "slug": "TWI-2B86-001",\n      "created_at": "2022-06-01T09:01:12Z",\n      "country": "US",\n      "address_line1": "5230 Penfield Ave",\n      "address_line2": null,\n      "state": "CA",\n      "zipcode": "91364",\n      "email": "dinesh@piedpiper.test",\n      "city": "Woodland Hills",\n      "url": "http://hooli.com",\n      "phone": "1-171-883-3711 x245",\n      "logo_url": "http://hooli.com/logo.png",\n      "legal_name": "Coleman-Blair",\n      "legal_number": "49-008-2965",\n      "currency": "USD",\n      "timezone": null,\n      "applicable_timezone": "UTC",\n      "billing_configuration": {\n        "invoice_grace_period": null,\n        "payment_provider": null,\n        "vat_rate": 0,\n        "document_locale": null\n      }\n    },\n    "fees": [\n      {\n        "lago_id": "5fe06606-25c8-4aa8-bce8-a19a12383d51",\n        "lago_group_id": null,\n        "lago_invoice_id": "b7b6a31f-b81b-4ae5-a9c8-05c407e47416",\n        "lago_true_up_fee_id": null,\n        "lago_true_up_parent_fee_id": null,\n        "item": {\n          "type": "add_on",\n          "code": "setup_fee",\n          "name": "Setup Fee",\n          "lago_item_id": "b3f1967d-bf84-44a7-b3e9-207024a6aaa5",\n          "item_type": "AddOn"\n        },\n        "amount_cents": 5000,\n        "amount_currency": "USD",\n        "vat_amount_cents": 500,\n        "vat_amount_currency": "USD",\n        "total_amount_cents": 5500,\n        "total_amount_currency": "USD",\n        "units": "5.0",\n        "description": "",\n        "unit_amount_cents": 1000,\n        "events_count": null,\n        "payment_status": "pending",\n        "created_at": "2023-05-05T15:05:27Z",\n        "succeeded_at": null,\n        "failed_at": null,\n        "refunded_at": null\n      },\n      {\n        "lago_id": "a74705a1-05f2-41cb-b315-ab0c858c215d",\n        "lago_group_id": null,\n        "lago_invoice_id": "b7b6a31f-b81b-4ae5-a9c8-05c407e47416",\n        "lago_true_up_fee_id": null,\n        "lago_true_up_parent_fee_id": null,\n        "item": {\n          "type": "add_on",\n          "code": "customer_success_fee",\n          "name": "Customer Success",\n          "lago_item_id": "66b75fbf-3410-4251-9105-b4b3d5922a1d",\n          "item_type": "AddOn"\n        },\n        "amount_cents": 20000,\n        "amount_currency": "USD",\n        "vat_amount_cents": 2000,\n        "vat_amount_currency": "USD",\n        "total_amount_cents": 22000,\n        "total_amount_currency": "USD",\n        "units": "1.0",\n        "description": "My new description",\n        "unit_amount_cents": 20000,\n        "events_count": null,\n        "payment_status": "pending",\n        "created_at": "2023-05-05T15:05:27Z",\n        "succeeded_at": null,\n        "failed_at": null,\n        "refunded_at": null\n      }\n    ]\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"invoice")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"JSON")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not nullable")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"../invoices/invoice-object"},"Invoice object")))))),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Prepaid credits added")),"Sent when prepaid credits have been added to the customer's wallet.",(0,r.kt)("p",null,"You can use this information to generate a PDF invoice or collect the payment."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "invoice.paid_credit_added",\n  "object_type": "invoice",\n  "invoice": {\n    "lago_id": "0e77ace9-68ba-0000-aaaa-999888c43f75",\n    "sequential_id": 14,\n    "number": "SEL-AZ22-034-014",\n    "issuing_date": "2023-04-24",\n    "invoice_type": "credit",\n    "status": "finalized",\n    "payment_status": "pending",\n    "currency": "USD",\n    "fees_amount_cents": 100,\n    "amount_cents": 100,\n    "vat_amount_cents": 0,\n    "coupons_amount_cents": 0,\n    "credit_notes_amount_cents": 0,\n    "credit_amount_cents": 0,\n    "total_amount_cents": 100,\n    "prepaid_credit_amount_cents": 0,\n    "file_url": null,\n    "version_number": 2,\n    "legacy": false,\n    "amount_currency": "USD",\n    "vat_amount_currency": "USD",\n    "credit_amount_currency": "USD",\n    "total_amount_currency": "USD",\n    "customer": {\n      "lago_id": "0e77ace9-68ba-1111-bbbb-999888c43f75",\n      "external_id": "customer_1234",\n      "name": "James White",\n      "sequential_id": 34,\n      "slug": "SEL-AZ22-034",\n      "created_at": "2023-04-19T21:49:37Z",\n      "country": null,\n      "address_line1": null,\n      "address_line2": null,\n      "state": null,\n      "zipcode": null,\n      "email": null,\n      "city": null,\n      "url": null,\n      "phone": null,\n      "logo_url": null,\n      "legal_name": null,\n      "legal_number": null,\n      "currency": "USD",\n      "timezone": null,\n      "applicable_timezone": "UTC",\n      "billing_configuration": {\n        "invoice_grace_period": null,\n        "payment_provider": null,\n        "vat_rate": null,\n        "document_locale": null\n      }\n    },\n    "fees": [\n      {\n        "lago_id": "0e77ace9-68ba-3333-hhhh-999888c43f75",\n        "lago_group_id": null,\n        "lago_invoice_id": "0e77ace9-68ba-4444-pppp-999888c43f75",\n        "lago_true_up_fee_id": null,\n        "lago_true_up_parent_fee_id": null,\n        "item": {\n          "type": "credit",\n          "code": "credit",\n          "name": "credit",\n          "lago_item_id": "0e77ace9-68ba-9999-rrrr-999888c43f75",\n          "item_type": "WalletTransaction"\n        },\n        "amount_cents": 100,\n        "amount_currency": "USD",\n        "vat_amount_cents": 0,\n        "vat_amount_currency": "USD",\n        "total_amount_cents": 100,\n        "total_amount_currency": "USD",\n        "units": "1.0",\n        "events_count": null,\n        "external_subscription_id": null,\n        "payment_status": "pending",\n        "created_at": "2023-04-24T08:47:43Z",\n        "succeeded_at": null,\n        "failed_at": null,\n        "refunded_at": null\n      }\n    ]\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"invoice")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"JSON")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not nullable")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"../invoices/invoice-object"},"Invoice object")))))),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"PDF invoice generated")),"Sent when the PDF file has been generated for a customer invoice.",(0,r.kt)("p",null,"This will allow your application to retrieve the PDF invoice."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "invoice.generated",\n  "object_type": "invoice",\n  "invoice": {\n    "lago_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "sequential_id": 2,\n    "number": "LAG-1234-001-002",\n    "from_date": "2022-04-01",\n    "to_date": "2022-04-30",\n    "charges_from_date": "2022-04-01",\n    "issuing_date": "",\n    "amount_cents": 100,\n    "amount_currency": "EUR",\n    "vat_amount_cents": 20,\n    "vat_amount_currency": "EUR",\n    "total_amount_cents": 120,\n    "total_amount_currency": "EUR",\n    "file_url": "https://getlago.com/invoice/file",\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"invoice")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"JSON")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not nullable")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"../invoices/invoice-object"},"Invoice object")))))),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Payment status updated")),"Sent when the payment status of an invoice is updated based on information provided by the PSP.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "invoice.payment_status_updated",\n  "object_type": "invoice",\n  "invoice": {\n    "lago_id": "68133479-abcd-1234-5678-jklm437da000",\n    "sequential_id": 1,\n    "number": "SEL-AZ22-040-XXX",\n    "issuing_date": "2023-04-24",\n    "invoice_type": "subscription",\n    "status": "finalized",\n    "payment_status": "succeeded",\n    "currency": "USD",\n    "fees_amount_cents": 70,\n    "amount_cents": 70,\n    "vat_amount_cents": 11,\n    "coupons_amount_cents": 0,\n    "credit_notes_amount_cents": 0,\n    "credit_amount_cents": 0,\n    "total_amount_cents": 81,\n    "prepaid_credit_amount_cents": 0,\n    "file_url": null,\n    "version_number": 2,\n    "legacy": false,\n    "amount_currency": "USD",\n    "vat_amount_currency": "USD",\n    "credit_amount_currency": "USD",\n    "total_amount_currency": "USD"\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"invoice")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"JSON")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not nullable")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"../invoices/invoice-object"},"Invoice object")))))),(0,r.kt)("h2",{id:"subscriptions-and-fees"},"Subscriptions and fees"),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Instant fee created")),"Sent when a fee for a charge to be paid in advance is created.",(0,r.kt)("p",null,"You can use this information to collect the payment of the ",(0,r.kt)("inlineCode",{parentName:"p"},"pay_in_advance")," fee."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "fee.created",\n  "object_type": "fee",\n  "fee": {\n    "lago_id": "6be23c42-47d2-45a3-9770-5b3572f225c3",\n    "lago_group_id": "5b4881e3-b451-472e-9e03-d99379550743",\n    "lago_true_up_fee_id": null,\n    "lago_true_up_parent_fee_id": null,\n    "item": {\n      "type": "subscription",\n      "code": "plan_code",\n      "name": "Plan"\n    },\n    "amount_cents": 100,\n    "amount_currency": "EUR",\n    "vat_amount_cents": 20,\n    "vat_amount_currency": "EUR",\n    "total_amount_cents": 120,\n    "total_amount_currency": "EUR",\n    "units": "0.32",\n    "events_count": 23\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"fee")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"JSON")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not nullable")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"../fees/fee-object"},"Fee object")))))),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Subscription terminated")),"Sent when a subscription is terminated.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "subscription.terminated",\n  "object_type": "subscription",\n  "subscription": {\n    "lago_id": "0fd99089-b15a-abcd-1234-a8292df18990",\n    "external_id": "custom_sub_id_1234",\n    "lago_customer_id": "27b9c2d9-abcd-1234-898f-hyt29a8e0eea",\n    "external_customer_id": "customer_1234",\n    "name": "",\n    "plan_code": "premium",\n    "status": "terminated",\n    "billing_time": "anniversary",\n    "subscription_at": "2023-01-11T10:51:29Z",\n    "started_at": "2023-01-11T10:51:29Z",\n    "terminated_at": "2023-01-24T14:53:02Z",\n    "canceled_at": null,\n    "created_at": "2023-01-11T10:51:34Z",\n    "previous_plan_code": null,\n    "next_plan_code": null,\n    "downgrade_plan_date": null,\n    "subscription_date": "2023-01-11"\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"subscription")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"JSON")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not nullable")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"../subscriptions/subscription-object"},"Subscription object")))))),(0,r.kt)("h2",{id:"external-payment-providers"},"External payment providers"),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Payment provider created")),"This webhook is sent when a customer is successfully created in the payment provider's application.",(0,r.kt)("p",null,"This allows you to retrieve the identifier assigned to the customer by the payment service provider."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "customer.payment_provider_created",\n  "object_type": "customer",\n  "customer": {\n    "lago_id": "99a6094e-199b-4101-896a-54e927ce7bd7",\n    "external_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "address_line1": "5230 Penfield Ave",\n    "address_line2": null,\n    "city": "Woodland Hills",\n    "country": "US",\n    "created_at": "2022-04-29T08:59:51Z",\n    "email": "dinesh@piedpiper.test",\n    "legal_name": "Coleman-Blair",\n    "legal_number": "49-008-2965",\n    "logo_url": "http://hooli.com/logo.png",\n    "name": "Gavin Belson",\n    "phone": "1-171-883-3711 x245",\n    "state": "CA",\n    "url": "http://hooli.com",\n    "vat_rate": 12.5,\n    "zipcode": "91364",\n    "billing_configuration": {\n      "payment_provider": "stripe",\n      "provider_customer_id": "cus_12345"\n    }\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"customer")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"JSON")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not nullable")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"../customers/customer-object"},"Customer object")))))),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Checkout URL generated")),"Sent when a new customer is created through integration with GoCardless.",(0,r.kt)("p",null,"Includes the URL that should be used to set up the ",(0,r.kt)("a",{parentName:"p",href:"../../guide/payments/gocardless-integration#direct-debit"},"direct debit mandate"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "customer.checkout_url_generated",\n  "object_type": "payment_provider_customer_checkout_url",\n  "payment_provider_customer_checkout_url": {\n    "lago_customer_id": "99a6094e-199b-4101-896a-54e927ce7bd7",\n    "external_customer_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "payment_provider": "gocardless",\n    "checkout_url": "__CUSTOM_CHECKOUT_URL__"\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"lago_customer_id")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifer of the customer in Lago")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"external_customer_id")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifer of the customer in your application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"payment_provider")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Default payment provider for this customer")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"checkout_url")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"URL that should be used to set up the direct debit mandate"))))),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Payment provider error")),"This webhook is sent when there is an error related to the creation of a customer in the payment provider's application.",(0,r.kt)("p",null,"You should review the customer's data."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "customer.payment_provider_error",\n  "object_type": "payment_provider_customer_error",\n  "payment_provider_customer_error": {\n    "lago_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "external_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "payment_provider": "stripe",\n    "provider_error": {\n      "message": "Invalid email address",\n      "error_code": "email_invalid"\n    }\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"lago_id")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifer of the customer in Lago application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"external_id")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifer of the customer in your application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"payment_provider")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Payment provider used to process the payment")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"provider_error","[message]")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Error message sent by the payment provider")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"provider_error","[error_code]")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Error code sent by the payment provider"))))),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Payment failure")),"Sent when there is an error related to the payment process.",(0,r.kt)("p",null,"Usually occurs when no valid payment method is defined for the customer in the payment service provider's application."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "invoice.payment_failure",\n  "object_type": "payment_provider_invoice_payment_error",\n  "payment_provider_invoice_payment_error": {\n    "lago_invoice_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "lago_customer_id": "99a6094e-199b-4101-896a-54e927ce7bd7",\n    "external_customer_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "provider_customer_id": "cus_123456",\n    "payment_provider": "stripe",\n    "provider_error": {\n      "message": "Cannot charge a customer that has no active card",\n      "error_code": "missing"\n    }\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"lago_invoice_id")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifer of the invoice in Lago application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"lago_customer_id")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifer of the customer in Lago application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"external_customer_id")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifer of the customer in your application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"provider_customer_id")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifer of the customer in payment provider application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"payment_provider")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Payment provider used to process the payment")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"provider_error","[message]")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Error message sent by the payment provider")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"provider_error","[error_code]")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Error code sent by the payment provider"))))),(0,r.kt)("h2",{id:"credit-notes-and-refunds"},"Credit notes and refunds"),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Credit note created")),"Sent when a new credit note has been issued for a customer.",(0,r.kt)("p",null,"This will allow your application to proceed with the refund."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "credit_note.created",\n  "object_type": "credit_note",\n  "credit_note": {\n    "lago_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "sequential_id": 2,\n    "number": "LAG-1234-CN2",\n    "lago_invoice_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "invoice_number": "LAG-1234",\n    "issuing_date": "2022-12-06",\n    "credit_status": "available",\n    "refund_status": "pending",\n    "reason": "other",\n    "description": "Free text",\n    "total_amount_cents": 120,\n    "total_amount_currency": "EUR",\n    "credit_amount_cents": 100,\n    "credit_amount_currency": "EUR",\n    "refund_amount_cents": 0,\n    "refund_amount_currency": "EUR",\n    "balance_amount_cents": 100,\n    "balance_amount_currency": "EUR",\n    "vat_amount_cents": 20,\n    "vat_amount_currency": "EUR",\n    "sub_total_vat_excluded_amount_cents": 100,\n    "sub_total_vat_excluded_amount_currency": "EUR",\n    "created_at": "2022-10-06 09:52:00",\n    "updated_at": "2022-10-06 09:52:00",\n    "file_url": "https://getlago.com/credit_note/file",\n    "items": [\n      {\n        "lago_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n        "amount_cents": 100,\n        "amount_currency": "EUR",\n        "fee":       {\n          "lago_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n          "item": {\n            "type": "charge",\n            "code": "user_seats",\n            "name": "User Seats"\n          },\n          "amount_cents": 100,\n          "amount_currency": "",\n          "vat_amount_cents": 20,\n          "vat_amount_currency": "EUR",\n          "total_amount_cents": 120,\n          "total_amount_currency": "EUR",\n          "units": 12.6,\n          "events_count": 10\n        }\n      }\n    ]\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"credit_note")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"JSON")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not nullable")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"../credit_notes/credit-note-object"},"Credit note object")))))),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"PDF credit note generated")),"Sent when the PDF file has been generated for a credit note.",(0,r.kt)("p",null,"This will allow your application to retrieve the PDF credit note."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "credit_note.generated",\n  "object_type": "credit_note",\n    "credit_note": {\n    "lago_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "sequential_id": 2,\n    "number": "LAG-1234-CN2",\n    "lago_invoice_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "invoice_number": "LAG-1234",\n    "issuing_date": "2022-12-06",\n    "credit_status": "available",\n    "refund_status": "pending",\n    "reason": "other",\n    "description": "Free text",\n    "total_amount_cents": 120,\n    "total_amount_currency": "EUR",\n    "credit_amount_cents": 100,\n    "credit_amount_currency": "EUR",\n    "refund_amount_cents": 0,\n    "refund_amount_currency": "EUR",\n    "balance_amount_cents": 100,\n    "balance_amount_currency": "EUR",\n    "vat_amount_cents": 20,\n    "vat_amount_currency": "EUR",\n    "sub_total_vat_excluded_amount_cents": 100,\n    "sub_total_vat_excluded_amount_currency": "EUR",\n    "created_at": "2022-10-06 09:52:00",\n    "updated_at": "2022-10-06 09:52:00",\n    "file_url": "https://getlago.com/credit_note/file",\n    "items": [\n      {\n        "lago_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n        "amount_cents": 100,\n        "amount_currency": "EUR",\n        "fee":       {\n          "lago_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n          "item": {\n            "type": "charge",\n            "code": "user_seats",\n            "name": "User Seats"\n          },\n          "amount_cents": 100,\n          "amount_currency": "",\n          "vat_amount_cents": 20,\n          "vat_amount_currency": "EUR",\n          "total_amount_cents": 120,\n          "total_amount_currency": "EUR",\n          "units": 12.6,\n          "events_count": 10\n        }\n      }\n    ]\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"credit_note")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"JSON")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not nullable")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"../credit_notes/credit-note-object"},"Credit note object")))))),(0,r.kt)("details",{className:"custom-toggle"},(0,r.kt)("summary",null,(0,r.kt)("b",null,"Refund failure")),"This webhook is sent when there is an error related to a credit note refund of a payment previously created on a payment provider.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "webhook_type": "credit_note.refund_failure",\n  "object_type": "payment_provider_customer_error",\n  "credit_note_payment_provider_refund_error": {\n    "lago_credit_note_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "lago_customer_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "external_customer_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "provider_customer_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "payment_provider": "stripe",\n    "provider_error": {\n      "message": "error message",\n      "code": "error_code"\n    },\n  }\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attributes"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"lago_credit_note_id")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifer of the credit note in Lago application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"lago_customer_id")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifer of the customer in Lago application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"external_customer_id")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifer of the customer in your application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"provider_customer_id")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifer of the customer in payment provider")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"payment_provider")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")," ","\xa0"," ","\xa0"," ",(0,r.kt)(p,{mdxType:"NotNullable"},"Not null")),(0,r.kt)("td",{parentName:"tr",align:null},"Payment provider used to process the payment")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"provider_error","[message]")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Error message sent by the payment provider")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"provider_error","[error_code]")," ","\xa0"," ","\xa0"," ",(0,r.kt)(s,{mdxType:"Type"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Error message sent by the payment provider"))))))}b.isMDXComponent=!0}}]);