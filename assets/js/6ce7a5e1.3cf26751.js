"use strict";(self.webpackChunklago_doc=self.webpackChunklago_doc||[]).push([[2799],{3905:(t,e,a)=>{a.d(e,{Zo:()=>s,kt:()=>k});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var p=n.createContext({}),d=function(t){var e=n.useContext(p),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},s=function(t){var e=d(t.components);return n.createElement(p.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},m=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,p=t.parentName,s=o(t,["components","mdxType","originalType","parentName"]),m=d(a),k=r,c=m["".concat(p,".").concat(k)]||m[k]||u[k]||l;return a?n.createElement(c,i(i({ref:e},s),{},{components:a})):n.createElement(c,i({ref:e},s))}));function k(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var p in e)hasOwnProperty.call(e,p)&&(o[p]=e[p]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var d=2;d<l;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},123:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const l={sidebar_position:1},i="Docker",o={unversionedId:"guide/self-hosting/docker",id:"guide/self-hosting/docker",title:"Docker",description:"Docker is the easiest way to get started with the self-hosted version of Lago.",source:"@site/docs/guide/02_self-hosting/docker.md",sourceDirName:"guide/02_self-hosting",slug:"/guide/self-hosting/docker",permalink:"/docs/guide/self-hosting/docker",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"guide",previous:{title:"Why Billing is a Nightmare",permalink:"/docs/guide/intro/billing-nightmare"},next:{title:"Tracking & Analytics",permalink:"/docs/guide/self-hosting/tracking"}},p={},d=[{value:"Requirements",id:"requirements",level:2},{value:"Run the app",id:"run-the-app",level:2},{value:"Signing up",id:"signing-up",level:2},{value:"Find your API Key",id:"find-your-api-key",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Version",id:"version",level:3},{value:"Environment variables",id:"environment-variables",level:3},{value:"Components",id:"components",level:3},{value:"SSL Support",id:"ssl-support",level:3},{value:"Self Signed Certificate",id:"self-signed-certificate",level:4},{value:"Let&#39;s Encrypt Certificate",id:"lets-encrypt-certificate",level:4},{value:"Storage",id:"storage",level:3},{value:"AWS S3",id:"aws-s3",level:4},{value:"AWS S3 Compatible Endpoints",id:"aws-s3-compatible-endpoints",level:4},{value:"Google Cloud Service Cloud Storage",id:"google-cloud-service-cloud-storage",level:4}],s={toc:d};function u(t){let{components:e,...a}=t;return(0,r.kt)("wrapper",(0,n.Z)({},s,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"docker"},"Docker"),(0,r.kt)("p",null,"Docker is the easiest way to get started with the self-hosted version of Lago."),(0,r.kt)("h2",{id:"requirements"},"Requirements"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Install ",(0,r.kt)("a",{parentName:"li",href:"https://docs.docker.com/get-docker/"},"Docker")," on your machine;"),(0,r.kt)("li",{parentName:"ol"},"Make sure ",(0,r.kt)("a",{parentName:"li",href:"https://docs.docker.com/compose/install/"},"Docker Compose")," is installed and available (it should be the case if you have chosen to install Docker via Docker Desktop); and"),(0,r.kt)("li",{parentName:"ol"},"Make sure ",(0,r.kt)("a",{parentName:"li",href:"https://git-scm.com/book/en/v2/Getting-Started-Installing-Git"},"Git")," is installed on your machine.")),(0,r.kt)("h2",{id:"run-the-app"},"Run the app"),(0,r.kt)("p",null,"To start using Lago, run the following commands in a shell:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# Get the code\ngit clone https://github.com/getlago/lago.git\n\n# Go to Lago folder\ncd lago\n\n# Set up environment configuration\necho "LAGO_RSA_PRIVATE_KEY=\\"`openssl genrsa 2048 | base64`\\"" >> .env\nsource .env\n\n# Start\ndocker-compose up\n')),(0,r.kt)("p",null,"You can now open your browser and go to ",(0,r.kt)("a",{parentName:"p",href:"http://localhost"},"http://localhost")," to connect to the application. Just after ",(0,r.kt)("a",{parentName:"p",href:"./docker#signing-up"},"signing up"),", Lago's API is exposed at ",(0,r.kt)("a",{parentName:"p",href:"http://localhost:3000"},"http://localhost:3000"),"."),(0,r.kt)("h2",{id:"signing-up"},"Signing up"),(0,r.kt)("p",null,"It's mandatory to create your organization by signing up to Lago. This organization is the core object of your biller as it's used to invoice your customers."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Write down your ",(0,r.kt)("inlineCode",{parentName:"li"},"organization name"),";"),(0,r.kt)("li",{parentName:"ol"},"Use the main billing ",(0,r.kt)("inlineCode",{parentName:"li"},"email")," of your company; and"),(0,r.kt)("li",{parentName:"ol"},"Define the admin ",(0,r.kt)("inlineCode",{parentName:"li"},"password")," for this email.")),(0,r.kt)("p",null,"You will be able to ",(0,r.kt)("strong",{parentName:"p"},"invite other email addresses within the application"),". If you already have an account, you can also log in. Once you are able to access the app, you can retrieve your API key."),(0,r.kt)("h2",{id:"find-your-api-key"},"Find your API Key"),(0,r.kt)("p",null,"Your API Key can be found directly in the UI:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Access the ",(0,r.kt)("strong",{parentName:"li"},"Developer")," section from the sidebar;"),(0,r.kt)("li",{parentName:"ol"},"The first tab of this section is related to your ",(0,r.kt)("strong",{parentName:"li"},"API keys"),"; and"),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Copy")," button to copy it to clipboard.")),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("h3",{id:"version"},"Version"),(0,r.kt)("p",null,"Docker images are always updated to the last stable version in the ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file.\nYou can use a different tag if needed by checking the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/getlago/lago/releases"},"releases list"),"."),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"We recommend to avoid the usage of ",(0,r.kt)("inlineCode",{parentName:"p"},"latest")," tag, you should use the last tagged version, you can track what are the last version on Dockerhub"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"lago-api : ",(0,r.kt)("a",{parentName:"li",href:"https://hub.docker.com/repository/docker/getlago/api"},"https://hub.docker.com/repository/docker/getlago/api")),(0,r.kt)("li",{parentName:"ul"},"lago-front : ",(0,r.kt)("a",{parentName:"li",href:"https://hub.docker.com/repository/docker/getlago/front"},"https://hub.docker.com/repository/docker/getlago/front")))),(0,r.kt)("h3",{id:"environment-variables"},"Environment variables"),(0,r.kt)("p",null,"Lago uses the following environment variables to configure the components of the application. You can override them to customise your setup."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Variable"),(0,r.kt)("th",{parentName:"tr",align:null},"Default value"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"POSTGRES_HOST"),(0,r.kt)("td",{parentName:"tr",align:null},"db"),(0,r.kt)("td",{parentName:"tr",align:null},"Host name of the postgres server")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"POSTGRES_DB"),(0,r.kt)("td",{parentName:"tr",align:null},"lago"),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the postgres database")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"POSTGRES_USER"),(0,r.kt)("td",{parentName:"tr",align:null},"lago"),(0,r.kt)("td",{parentName:"tr",align:null},"Database user for postgres connection")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"POSTGRES_PASSWORD"),(0,r.kt)("td",{parentName:"tr",align:null},"changeme"),(0,r.kt)("td",{parentName:"tr",align:null},"Database password for postgres connection")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"POSTGRES_PORT"),(0,r.kt)("td",{parentName:"tr",align:null},"5432"),(0,r.kt)("td",{parentName:"tr",align:null},"Port the postgres database listens to")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"REDIS_HOST"),(0,r.kt)("td",{parentName:"tr",align:null},"redis"),(0,r.kt)("td",{parentName:"tr",align:null},"Host name of the redis server")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"REDIS_PORT"),(0,r.kt)("td",{parentName:"tr",align:null},"6379"),(0,r.kt)("td",{parentName:"tr",align:null},"Port the redis database listens to")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_REDIS_CACHE_HOST"),(0,r.kt)("td",{parentName:"tr",align:null},"redis"),(0,r.kt)("td",{parentName:"tr",align:null},"Host name of the redis cache server")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_REDIS_CACHE_PORT"),(0,r.kt)("td",{parentName:"tr",align:null},"6379"),(0,r.kt)("td",{parentName:"tr",align:null},"Port the redis cache server listens to")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_FRONT_URL"),(0,r.kt)("td",{parentName:"tr",align:null},"http://localhost"),(0,r.kt)("td",{parentName:"tr",align:null},"URL of the Lago front-end application.",(0,r.kt)("br",null),"Used for CORS configuration")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"FRONT_PORT"),(0,r.kt)("td",{parentName:"tr",align:null},"80"),(0,r.kt)("td",{parentName:"tr",align:null},"Port the front-end application listens to")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_API_URL"),(0,r.kt)("td",{parentName:"tr",align:null},"http://localhost:3000"),(0,r.kt)("td",{parentName:"tr",align:null},"URL of the Lago back-end application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"API_PORT"),(0,r.kt)("td",{parentName:"tr",align:null},"3000"),(0,r.kt)("td",{parentName:"tr",align:null},"Port the back-end application listens to")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SECRET_KEY_BASE"),(0,r.kt)("td",{parentName:"tr",align:null},"your-secret-key-base-hex-64"),(0,r.kt)("td",{parentName:"tr",align:null},"Secret key used for session encryption")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SENTRY_DSN"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Sentry DSN key for error and performance tracking")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_RSA_PRIVATE_KEY"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Private key used for webhook signatures")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_SIDEKIQ_WEB"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Activate the Sidekiq web UI, disabled by default")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_ENCRYPTION_PRIMARY_KEY"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Encryption primary key used to secure sensitive values stored in the database")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_ENCRYPTION_DETERMINISTIC_KEY"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Encryption deterministic key used to secure sensitive values stored in the database")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_ENCRYPTION_KEY_DERIVATION_SALT"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Encryption key salt used to secure sensitive values stored in the database")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_WEBHOOK_ATTEMPTS"),(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of failed attempt before stopping to deliver a webhook")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_USE_AWS_S3"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Use AWS S3 for files storage")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_AWS_S3_ACCESS_KEY_ID"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"AWS Access Key id that has access to S3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_AWS_S3_SECRET_ACCESS_KEY"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"AWS Secret Access Key that has access to S3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_AWS_S3_REGION"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"AWS S3 Region")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_AWS_S3_BUCKET"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"AWS S3 Bucket name")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_AWS_S3_ENDPOINT"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"S3 compatible storage endpoint. Should be set only if you are using another storage provider than AWS S3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_USE_GCS"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false")),(0,r.kt)("td",{parentName:"tr",align:null},"Use Google Cloud Service Cloud Storage for file storage, \u26a0\ufe0f If you want to use GCS, you have to pass the credentials json key file to the ",(0,r.kt)("inlineCode",{parentName:"td"},"api")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"worker")," service")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_GCS_PROJECT"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"GCS Project name")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_GCS_BUCKET"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"GCS Bucket Name")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_PDF_URL"),(0,r.kt)("td",{parentName:"tr",align:null},"http://pdf:3000"),(0,r.kt)("td",{parentName:"tr",align:null},"PDF Service URL on your infrastructure")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LAGO_DISABLE_SIGNUP"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Disable Sign up when running Lago in self-hosted")))),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"We recommend that you change ",(0,r.kt)("inlineCode",{parentName:"p"},"POSTGRES_PASSWORD"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"SECRET_KEY_BASE"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"LAGO_RSA_PRIVATE_KEY"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"LAGO_ENCRYPTION_PRIMARY_KEY"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"LAGO_ENCRYPTION_DETERMINISTIC_KEY")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"LAGO_ENCRYPTION_KEY_DERIVATION_SALT")," to improve the security of your Lago instance:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"SECRET_KEY_BASE")," can be generated using the ",(0,r.kt)("inlineCode",{parentName:"li"},"openssl rand -hex 64")," command."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"LAGO_RSA_PRIVATE_KEY")," can be generated using the ",(0,r.kt)("inlineCode",{parentName:"li"},"openssl genrsa 2048 | base64")," command."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"LAGO_ENCRYPTION_PRIMARY_KEY"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"LAGO_ENCRYPTION_DETERMINISTIC_KEY")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"LAGO_ENCRYPTION_KEY_DERIVATION_SALT")," can all be gerated using the ",(0,r.kt)("inlineCode",{parentName:"li"},"cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1")," command."))),(0,r.kt)("h3",{id:"components"},"Components"),(0,r.kt)("p",null,"Lago uses the following containers:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Container"),(0,r.kt)("th",{parentName:"tr",align:null},"Role"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"front"),(0,r.kt)("td",{parentName:"tr",align:null},"Front-end application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"api"),(0,r.kt)("td",{parentName:"tr",align:null},"API back-end application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"api_worker"),(0,r.kt)("td",{parentName:"tr",align:null},"Asynchronous worker for the API application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"api_clock"),(0,r.kt)("td",{parentName:"tr",align:null},"Clock worker for the API application")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"db"),(0,r.kt)("td",{parentName:"tr",align:null},"Postgres database engine used to store application data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"redis"),(0,r.kt)("td",{parentName:"tr",align:null},"Redis database engine used as a queuing system for asynchronous tasks")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pdf"),(0,r.kt)("td",{parentName:"tr",align:null},"PDF generation powered by Gotenberg")))),(0,r.kt)("p",null,"You can also use your own database or Redis server. To do so, remove the ",(0,r.kt)("inlineCode",{parentName:"p"},"db")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"redis")," configurations from the ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file and update the environment variables accordingly."),(0,r.kt)("h3",{id:"ssl-support"},"SSL Support"),(0,r.kt)("p",null,"Lago Front application can be configured to support SSL certificates.\nYou have two options to achieve this:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"by using a self-signed certificate"),(0,r.kt)("li",{parentName:"ul"},"by using a signed certificate generated by Let's Encrypt")),(0,r.kt)("h4",{id:"self-signed-certificate"},"Self Signed Certificate"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Run the script to generate the certificates")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Be sure to be in your lago folder\n./extra/init-selfsigned.sh\n\n# This should create certificates in the ./extra/ssl/ folder\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Take a look at the ",(0,r.kt)("inlineCode",{parentName:"li"},"docker-compose.yml")," file and uncomment the part related to the Self-Signed certificate")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"volumes:\n  - ./extra/nginx-selfsigned.conf:/etc/nginx/conf.d/default.conf\n  - ./extra/ssl/nginx-selfsigned.crt:/etc/ssl/certs/nginx-selfsigned.crt\n  - ./extra/ssl/nginx-selfsigned.key:/etc/ssl/private/nginx-selfsigned.key\n  - ./extra/ssl/dhparam.pem:/etc/ssl/certs/dhparam.pem\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You can now start the front application with a self signed SSL certificate support")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"docker-compose up front\n")),(0,r.kt)("h4",{id:"lets-encrypt-certificate"},"Let's Encrypt Certificate"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Edit the file ",(0,r.kt)("inlineCode",{parentName:"p"},"extra/init-letsencrypt.sh")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"You must replace ",(0,r.kt)("inlineCode",{parentName:"li"},"lago.example")," with your domain name"),(0,r.kt)("li",{parentName:"ul"},"You must enter a valid email address"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Run the script"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Be sure to be in your lago folder\n./extra/init-letsencrypt.sh\n\n# You will be asked to provide some information\n# After that you should be able to see the extra/certbot folder\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Take a look at the ",(0,r.kt)("inlineCode",{parentName:"li"},"docker-compose.yml")," file and uncomment all the parts related to the Let's Encrypt's support")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'command: "/bin/sh -c \'while :; do sleep 6h & wait $${!}; nginx -s reload; done & nginx -g \\"daemon off;\\"\'"\n...\nvolumes:\n  - ./extra/nginx-letsencrypt.conf:/etc/nginx/conf.d/default.conf\n  - ./extra/certbot/conf:/etc/letsencrypt\n  - ./extra/certbot/www:/var/www/certbot\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You can now start the front application with the signed certificate support")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"docker-compose up front\n")),(0,r.kt)("h3",{id:"storage"},"Storage"),(0,r.kt)("p",null,"By default, Lago uses the internal storage of the container.\nYou can customize it by defining different environment variables."),(0,r.kt)("p",null,"We currently support : "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"AWS S3"),(0,r.kt)("li",{parentName:"ul"},"AWS S3 Compatibles Endpoints"),(0,r.kt)("li",{parentName:"ul"},"Google Cloud Service Cloud Storage")),(0,r.kt)("h4",{id:"aws-s3"},"AWS S3"),(0,r.kt)("p",null,"You have to set these variables to use AWS S3."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_USE_AWS_S3")),(0,r.kt)("td",{parentName:"tr",align:null},"Set to ",(0,r.kt)("inlineCode",{parentName:"td"},'"true"')," if you want to use AWS S3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_AWS_S3_ACCESS_KEY_ID")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS S3 Credentials Access Key Id")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_AWS_S3_SECRET_ACCESS_KEY")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS S3 Credentials Secret Access Key")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_AWS_S3_REGION")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS S3 Region")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_AWS_S3_BUCKET")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS S3 Bucket")))),(0,r.kt)("h4",{id:"aws-s3-compatible-endpoints"},"AWS S3 Compatible Endpoints"),(0,r.kt)("p",null,"You have to set these variables to use AWS S3 Compatible Endpoints."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_USE_AWS_S3")),(0,r.kt)("td",{parentName:"tr",align:null},"Set to ",(0,r.kt)("inlineCode",{parentName:"td"},'"true"')," if you want to use AWS S3 Compatible Endpoints")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_AWS_S3_ENDPOINT")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS S3 Compatible Endpoint")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_AWS_S3_ACCESS_KEY_ID")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS S3 Credentials Access Key Id")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_AWS_S3_SECRET_ACCESS_KEY")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS S3 Credentials Secret Access Key")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_AWS_S3_BUCKET")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS S3 Bucket")))),(0,r.kt)("h4",{id:"google-cloud-service-cloud-storage"},"Google Cloud Service Cloud Storage"),(0,r.kt)("p",null,"You have to set those variables to use GCS Cloud Storage."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_USE_GCS")),(0,r.kt)("td",{parentName:"tr",align:null},"Set to ",(0,r.kt)("inlineCode",{parentName:"td"},'"true"')," if you want to use GCS Cloud Storage")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_GCS_PROJECT")),(0,r.kt)("td",{parentName:"tr",align:null},"GCS Project name")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LAGO_GCS_BUCKET")),(0,r.kt)("td",{parentName:"tr",align:null},"GCS Bucket name")))),(0,r.kt)("p",null,"In the ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file, you must uncomment the lines and pass the correct GCS credentials json file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yml"},"api:\n  volumes:\n    - gcs_keyfile.json:/app/gcs_keyfile.json\n\napi-worker:\n  volumes:\n    - gcs_keyfile.json:/app/gcs_keyfile.json\n")))}u.isMDXComponent=!0}}]);