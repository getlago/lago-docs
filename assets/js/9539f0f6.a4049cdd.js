"use strict";(self.webpackChunklago_doc=self.webpackChunklago_doc||[]).push([[1577],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,g=d["".concat(s,".").concat(m)]||d[m]||c[m]||l;return n?a.createElement(g,i(i({ref:t},u),{},{components:n})):a.createElement(g,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6612:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const l={sidebar_position:4},i="Subscriptions",o={unversionedId:"guide/plans/subscription",id:"guide/plans/subscription",title:"Subscriptions",description:"A subscription is created when a plan is assigned to a customer. You can assign a plan to a customer at any time (i.e. when the customer record is created or later on).",source:"@site/docs/guide/05_plans/subscription.md",sourceDirName:"guide/05_plans",slug:"/guide/plans/subscription",permalink:"/docs/guide/plans/subscription",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"guide",previous:{title:"Charges",permalink:"/docs/guide/plans/charges"},next:{title:"Upgrades & Downgrades",permalink:"/docs/guide/plans/upgrades-downgrades"}},s={},p=[{value:"Billing cycles",id:"billing-cycles",level:2},{value:"Calendar billing period",id:"calendar-billing-period",level:3},{value:"Anniversary Date billing period",id:"anniversary-date-billing-period",level:3},{value:"Multiple plans",id:"multiple-plans",level:2}],u={toc:p};function c(e){let{components:t,...l}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"subscriptions"},"Subscriptions"),(0,r.kt)("p",null,"A ",(0,r.kt)("a",{parentName:"p",href:"../../api/subscriptions/subscription-object"},"subscription")," is created when a plan is assigned to a customer. You can assign a plan to a customer at any time (i.e. when the customer record is created or later on)."),(0,r.kt)("p",null,"To assign a plan to a customer through the user interface:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Access the ",(0,r.kt)("strong",{parentName:"li"},'"Customers"')," section via the side menu;"),(0,r.kt)("li",{parentName:"ol"},"Select a customer from the list;"),(0,r.kt)("li",{parentName:"ol"},"In the ",(0,r.kt)("strong",{parentName:"li"},'"Overview"')," tab, click ",(0,r.kt)("strong",{parentName:"li"},'"Add a plan"')," on the right;"),(0,r.kt)("li",{parentName:"ol"},"Select a plan and give a name to the subscription (name that will be displayed on the invoices - optional);"),(0,r.kt)("li",{parentName:"ol"},"Choose whether the subscription should be renewed at the beginning of the period or on its anniversary date (see ",(0,r.kt)("a",{parentName:"li",href:"subscription#billing-cycles"},"below"),"); and"),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},'"Add plan"')," to confirm.")),(0,r.kt)("p",null,"When a subscription is active, Lago will automatically generate invoices for the customer according to the ",(0,r.kt)("a",{parentName:"p",href:"./plan-model"},"plan model"),". It will also start monitoring the customer's consumption, which means that you can start pushing ",(0,r.kt)("a",{parentName:"p",href:"../../api/events/create-event"},"events")," related to this subscription."),(0,r.kt)("h2",{id:"billing-cycles"},"Billing cycles"),(0,r.kt)("h3",{id:"calendar-billing-period"},"Calendar billing period"),(0,r.kt)("p",null,"By default, subscriptions are based on ",(0,r.kt)("strong",{parentName:"p"},"calendar periods"),". Therefore, if you assign a monthly plan to a customer on July 14th:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The first invoice will be generated for the period July 14th to July 31st;"),(0,r.kt)("li",{parentName:"ul"},"The next invoice will be generated for the period August 1st to August 31st; and"),(0,r.kt)("li",{parentName:"ul"},"All future invoices will be generated for full calendar months.")),(0,r.kt)("p",null,"When a subscription starts during the month, the subscription fee will be calculated on a ",(0,r.kt)("strong",{parentName:"p"},"pro rata basis")," according to the number of days."),(0,r.kt)("p",null,"Consider the following example:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Your customer signs up for the Premium plan ($50 monthly) on August 10th."),(0,r.kt)("p",{parentName:"blockquote"},"There are 22 days left until the end of the month (including August 10th). Therefore, the subscription fee for August is:"),(0,r.kt)("p",{parentName:"blockquote"},"22 days x $50 / 31 days = $35.48")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Illustration of the anniversary date logic",src:n(389).Z,width:"2628",height:"544"})),(0,r.kt)("h3",{id:"anniversary-date-billing-period"},"Anniversary Date billing period"),(0,r.kt)("p",null,"However, you can choose to use the ",(0,r.kt)("strong",{parentName:"p"},"anniversary date")," of the subscription to define a custom billing period."),(0,r.kt)("p",null,"For example:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Your customer signs up for the Premium plan on August 10th."),(0,r.kt)("p",{parentName:"blockquote"},"If you choose to align the billing cycle with the anniversary date of the subscription, the customer will be billed every 10th of the month."),(0,r.kt)("p",{parentName:"blockquote"},"The first billing period will run from August 10th to September 9th.")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Illustration of the anniversary date logic",src:n(6443).Z,width:"2828",height:"636"})),(0,r.kt)("h2",{id:"multiple-plans"},"Multiple plans"),(0,r.kt)("p",null,"You may create several subscriptions for a customer by assigning them multiple plans. This can be particularly useful if your application allows customers to create different projects or workspaces (e.g. Free plan for Workspace 1, Free plan for Workspace 2, Premium plan for Workspace 3, etc.)."),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"There are some rules to keep in mind when assigning multiple plans to a customer:"),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},"All plans must be denominated in the same currency; and"),(0,r.kt)("li",{parentName:"ol"},"You must specify the ",(0,r.kt)("inlineCode",{parentName:"li"},"external_subscription_id")," for each event or create ",(0,r.kt)("a",{parentName:"li",href:"../../api/events/create-batch-event"},"batch events"),"."))),(0,r.kt)("p",null,"We recommend that you give each subscription a name when assigning multiple plans to a customer. The subscription names will make it easier to differentiate each plan and will also be displayed on the invoices."),(0,r.kt)("p",null,"When multiple subscriptions are linked to a customer, Lago will automatically consolidate invoices when possible."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null},"Month 1"),(0,r.kt)("th",{parentName:"tr",align:null},"Month 2"),(0,r.kt)("th",{parentName:"tr",align:null},"Month 3"),(0,r.kt)("th",{parentName:"tr",align:null},"Month 4"),(0,r.kt)("th",{parentName:"tr",align:null},"(...)"),(0,r.kt)("th",{parentName:"tr",align:null},"Month 13"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Plan A (monthly)"),(0,r.kt)("td",{parentName:"tr",align:null},"$40"),(0,r.kt)("td",{parentName:"tr",align:null},"$40"),(0,r.kt)("td",{parentName:"tr",align:null},"$40"),(0,r.kt)("td",{parentName:"tr",align:null},"$40"),(0,r.kt)("td",{parentName:"tr",align:null},"(...)"),(0,r.kt)("td",{parentName:"tr",align:null},"$40")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Plan B (monthly)"),(0,r.kt)("td",{parentName:"tr",align:null},"$60"),(0,r.kt)("td",{parentName:"tr",align:null},"$60"),(0,r.kt)("td",{parentName:"tr",align:null},"$60"),(0,r.kt)("td",{parentName:"tr",align:null},"$60"),(0,r.kt)("td",{parentName:"tr",align:null},"(...)"),(0,r.kt)("td",{parentName:"tr",align:null},"$60")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Plan C (yearly)"),(0,r.kt)("td",{parentName:"tr",align:null},"$500"),(0,r.kt)("td",{parentName:"tr",align:null},"-"),(0,r.kt)("td",{parentName:"tr",align:null},"-"),(0,r.kt)("td",{parentName:"tr",align:null},"-"),(0,r.kt)("td",{parentName:"tr",align:null},"(...)"),(0,r.kt)("td",{parentName:"tr",align:null},"$500")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Total invoice"),(0,r.kt)("td",{parentName:"tr",align:null},"$600"),(0,r.kt)("td",{parentName:"tr",align:null},"$100"),(0,r.kt)("td",{parentName:"tr",align:null},"$100"),(0,r.kt)("td",{parentName:"tr",align:null},"$100"),(0,r.kt)("td",{parentName:"tr",align:null},"(...)"),(0,r.kt)("td",{parentName:"tr",align:null},"$600")))),(0,r.kt)("p",null,"It is possible to link to the same customer subscriptions that are based on different billing cycles (e.g. a subscription based on calendar dates and another based on the anniversary date)."),(0,r.kt)("p",null,"In addition to this, please note that ",(0,r.kt)("strong",{parentName:"p"},"coupons apply to all subscriptions"),"."),(0,r.kt)("p",null,"Below is an example of a consolidated invoice:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Example of consolidated invoice",src:n(2161).Z,width:"2732",height:"1260"})))}c.isMDXComponent=!0},6443:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/anniversary-date-c66bee86224946e6e00af9c0cb7eedeb.png"},389:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/calendar-date-227bf60245e9d3715d3383098c88c1b0.png"},2161:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/consolidated-invoice-ba00cf17258e0c865dc61e1b7dfea0b3.png"}}]);