"use strict";(self.webpackChunklago_doc=self.webpackChunklago_doc||[]).push([[6276],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return d}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=u(n),d=i,g=p["".concat(s,".").concat(d)]||p[d]||c[d]||o;return n?a.createElement(g,r(r({ref:t},m),{},{components:n})):a.createElement(g,r({ref:t},m))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var u=2;u<o;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},7833:function(e,t,n){n.r(t),n.d(t,{Optional:function(){return d},Required:function(){return p},assets:function(){return m},contentTitle:function(){return s},default:function(){return f},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return c}});var a=n(7462),i=n(3366),o=(n(7294),n(3905)),r=["components"],l={sidebar_position:8},s="Customers",u={unversionedId:"guide/customers",id:"guide/customers",title:"Customers",description:"Create a customer",source:"@site/docs/guide/07_customers.mdx",sourceDirName:"guide",slug:"/guide/customers",permalink:"/docs/guide/customers",draft:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"guide",previous:{title:"Payments",permalink:"/docs/guide/invoicing/payments"},next:{title:"Integration Testing",permalink:"/docs/guide/testing-integration"}},m={},c=[{value:"Create a customer",id:"create-a-customer",level:2},{value:"Mandatory fields",id:"mandatory-fields",level:3},{value:"Additional fields",id:"additional-fields",level:3},{value:"Example of customer&#39;s information",id:"example-of-customers-information",level:3},{value:"Update a customer",id:"update-a-customer",level:2},{value:"Delete a customer",id:"delete-a-customer",level:2},{value:"Assigning a plan to a customer",id:"assigning-a-plan-to-a-customer",level:2},{value:"Ingesting events for a customer",id:"ingesting-events-for-a-customer",level:2},{value:"Invoicing a customer",id:"invoicing-a-customer",level:2}],p=function(e){var t=e.children;e.color;return(0,o.kt)("span",{style:{color:"#DC3309",fontSize:"13px"}},t)},d=function(e){var t=e.children;e.color;return(0,o.kt)("span",{style:{color:"#8C95A6",fontSize:"13px"}},t)},g={toc:c,Required:p,Optional:d};function f(e){var t=e.components,n=(0,i.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"customers"},"Customers"),(0,o.kt)("h2",{id:"create-a-customer"},"Create a customer"),(0,o.kt)("p",null,"You can create or update a customer both from the API or the user interface. The entire customer's information can be retrieved from the customer detailed view, available on the UI."),(0,o.kt)("h3",{id:"mandatory-fields"},"Mandatory fields"),(0,o.kt)("p",null,"To create a customer, 2 mandatory information are required:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("inlineCode",{parentName:"li"},"customer_id")," ",(0,o.kt)(p,{mdxType:"Required"},"(Required)"),": usual good practice is to send the unique id from your backend;"),(0,o.kt)("li",{parentName:"ul"},"A customer ",(0,o.kt)("inlineCode",{parentName:"li"},"name")," ",(0,o.kt)(p,{mdxType:"Required"},"(Required)"),": name of the customer.")),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You cannot change the ",(0,o.kt)("inlineCode",{parentName:"p"},"customer_id")," of a customer with an active subscription (active plan assigned to this customer)."))),(0,o.kt)("h3",{id:"additional-fields"},"Additional fields"),(0,o.kt)("p",null,"In addition to this, you can add optional information to a customer. ",(0,o.kt)("strong",{parentName:"p"},"This additional information is useful for invoicing.")," Here is the list of optional fields that can be retrieved for a customer:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"An ",(0,o.kt)("inlineCode",{parentName:"li"},"address_line1")," ",(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": first line of the billing address of your customer;"),(0,o.kt)("li",{parentName:"ul"},"An ",(0,o.kt)("inlineCode",{parentName:"li"},"address_line2"),(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": second line of the billing address of your customer;"),(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("inlineCode",{parentName:"li"},"city")," ",(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": city of the customer's billing address;"),(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("inlineCode",{parentName:"li"},"country")," ",(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": country code of the customer's billing address;"),(0,o.kt)("li",{parentName:"ul"},"An ",(0,o.kt)("inlineCode",{parentName:"li"},"email")," ",(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": main email of the customer;"),(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("inlineCode",{parentName:"li"},"legal_name")," ",(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": legal company name of the customer;"),(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("inlineCode",{parentName:"li"},"legal_number")," ",(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": legal company number of the customer;"),(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("inlineCode",{parentName:"li"},"logo_url")," ",(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": logo URL of the customer;"),(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("inlineCode",{parentName:"li"},"phone")," ",(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": phone number of the customer;"),(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("inlineCode",{parentName:"li"},"state")," ",(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": state of the customer's billing address;"),(0,o.kt)("li",{parentName:"ul"},"An ",(0,o.kt)("inlineCode",{parentName:"li"},"url")," ",(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": custom URL of the customer (domain url);"),(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("inlineCode",{parentName:"li"},"vat_rate")," ",(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": custom VAT applied to the customer. (It will override the one defined at organization level);"),(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("inlineCode",{parentName:"li"},"zipcode")," ",(0,o.kt)(d,{mdxType:"Optional"},"(Optional)"),": zipcode of the customer's billing address.")),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"These additional fields can be added later on by updating a customer."))),(0,o.kt)("h3",{id:"example-of-customers-information"},"Example of customer's information"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Customer\'s information example"',title:"\"Customer's",information:!0,'example"':!0},'{\n  "customer": {\n    "customer_id": "5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba",\n    "address_line1": "5230 Penfield Ave",\n    "address_line2": null,\n    "city": "Woodland Hills",\n    "country": "US",\n    "email": "dinesh@piedpiper.test",\n    "legal_name": "Coleman-Blair",\n    "legal_number": "49-008-2965",\n    "logo_url": "http://hooli.com/logo.png",\n    "name": "Gavin Belson",\n    "phone": "1-171-883-3711 x245",\n    "state": "CA",\n    "url": "http://hooli.com",\n    "vat_rate": 12.5,\n    "zipcode": "91364"\n  }\n}\n')),(0,o.kt)("h2",{id:"update-a-customer"},"Update a customer"),(0,o.kt)("p",null,"You can update a customer anytime you need by using the same endpoint. To do so, you just need to pass in the payload the ",(0,o.kt)("inlineCode",{parentName:"p"},"customer_id")," of the customer you want to update."),(0,o.kt)("h2",{id:"delete-a-customer"},"Delete a customer"),(0,o.kt)("p",null,"You can delete a customer ",(0,o.kt)("strong",{parentName:"p"},"only if this customer does not have an active subscription")," (active plan assigned to this customer)."),(0,o.kt)("h2",{id:"assigning-a-plan-to-a-customer"},"Assigning a plan to a customer"),(0,o.kt)("p",null,"You can create a subscription by assigning a plan to a customer. By creating a subscription, all the charges (base charge and additional charges) are appended to this customer. By ingesting events, the usage will be charged following the prices belonging to the current subscription's plan."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"From both the UI and the API, you can:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Create a subscription by assigning a plan to a customer"),(0,o.kt)("li",{parentName:"ul"},"Change a subscription by assigning a new plan to a customer"),(0,o.kt)("li",{parentName:"ul"},"Terminate a subscription")),(0,o.kt)("h2",{id:"ingesting-events-for-a-customer"},"Ingesting events for a customer"),(0,o.kt)("p",null,"Before sending event to a customer as usage measurement, ",(0,o.kt)("strong",{parentName:"p"},"you must define ",(0,o.kt)("a",{parentName:"strong",href:"./billable-metrics/overview"},"billable metric(s)")," from the UI.")," The ",(0,o.kt)("inlineCode",{parentName:"p"},"code")," of the billable metric is passed as a parameter of the event. Each paying feature of your product is a distinct billable metric and has a proper event ",(0,o.kt)("inlineCode",{parentName:"p"},"code"),"."),(0,o.kt)("p",null,"By sending an event to a customer, you are assigning a usage-based consumption from your application."),(0,o.kt)("p",null,"In Lago, all ingested events must hold a ",(0,o.kt)("inlineCode",{parentName:"p"},"customer_id"),", as shown in the following example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Event example"',title:'"Event','example"':!0},'{\n  "event": {\n    "transaction_id": "__UNIQUE_ID__", // unique id of the event\n    "customer_id": "__CUSTOMER_ID__", // customer_id of your customer\n    "code": "__EVENT_CODE__", // code of the targeted billable metric\n    "timestamp": 1650893379,\n    "properties": {\n      "custom_field": 12\n    }\n  }\n}\n')),(0,o.kt)("p",null,"Events represents the data delivered to Lago application that are aggregated into billable metrics. At the end of each billable period, Lago automatically aggregates those events into a billable metric with priced units that have been consumed by a customer. By clicking the following link, you can ",(0,o.kt)("a",{parentName:"p",href:"./billable-metrics/aggregation-types"},"know more about the aggregation types"),"."),(0,o.kt)("h2",{id:"invoicing-a-customer"},"Invoicing a customer"),(0,o.kt)("p",null,"Lago automatically generates an invoice for all your customers at the end of each billing period."),(0,o.kt)("p",null,"Click on the following link to ",(0,o.kt)("a",{parentName:"p",href:"./invoicing/overview"},"know more about invoicing with Lago"),"."))}f.isMDXComponent=!0}}]);