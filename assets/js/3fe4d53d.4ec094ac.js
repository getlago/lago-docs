"use strict";(self.webpackChunklago_doc=self.webpackChunklago_doc||[]).push([[7361],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return c}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),d=s(n),c=r,g=d["".concat(p,".").concat(c)]||d[c]||u[c]||i;return n?a.createElement(g,o(o({ref:t},m),{},{components:n})):a.createElement(g,o({ref:t},m))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5372:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return u}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],l={sidebar_position:2},p="Aggregation Types",s={unversionedId:"billable-metrics/aggregation-types",id:"billable-metrics/aggregation-types",title:"Aggregation Types",description:"By selecting one of the aggregation types for a Billable metric, you define how the ingested events are compiled and calculated at the end of a billable period.",source:"@site/docs/billable-metrics/aggregation-types.md",sourceDirName:"billable-metrics",slug:"/billable-metrics/aggregation-types",permalink:"/docs/billable-metrics/aggregation-types",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/billable-metrics/aggregation-types.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/docs/billable-metrics/overview"},next:{title:"Aggregation examples",permalink:"/docs/billable-metrics/aggregation-examples"}},m={},u=[{value:"1. COUNT",id:"1-count",level:2},{value:"2. SUM",id:"2-sum",level:2},{value:"3. MAX",id:"3-max",level:2},{value:"4. COUNT DISTINCT",id:"4-count-distinct",level:2}],d={toc:u};function c(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"aggregation-types"},"Aggregation Types"),(0,i.kt)("p",null,"By selecting one of the ",(0,i.kt)("strong",{parentName:"p"},"aggregation types")," for a Billable metric, you define how the ingested events are compiled and calculated at the end of a billable period."),(0,i.kt)("p",null,"Here is the full list of aggregation types currently supported officially by Lago."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Aggregation"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Transcription"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"COUNT")),(0,i.kt)("td",{parentName:"tr",align:null},"Count the number of times an incoming event occurs"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"COUNT(event.code)"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"SUM")),(0,i.kt)("td",{parentName:"tr",align:null},"Sum a defined property for incoming events"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"SUM(event.properties.property_name)"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"MAX")),(0,i.kt)("td",{parentName:"tr",align:null},"Get the maximum value of a defined property for incoming events"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"MAX(event.properties.property_name)"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"COUNT DISTINCT")),(0,i.kt)("td",{parentName:"tr",align:null},"Get the number of unique value of a defined property for incoming events"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"COUNT_DISTINCT(event.properties.property_name)"))))),(0,i.kt)("p",null,"Except the ",(0,i.kt)("inlineCode",{parentName:"p"},"COUNT"),"(that is counting the number of times an event occurs), the other types aggregate over a single property of the event. ",(0,i.kt)("strong",{parentName:"p"},"The result of this aggregation will be used to charge your customers.")),(0,i.kt)("p",null,"You can find more description and examples below."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Note that these aggregation rules are used to calculate usage-based behaviors.\nOther existing solutions name it ",(0,i.kt)("inlineCode",{parentName:"p"},"meter")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"metering"),"."))),(0,i.kt)("h2",{id:"1-count"},"1. COUNT"),(0,i.kt)("p",null,"Count the number of times an incoming event occurs. During a billable period, each time a defined event is flowing in, Lago will increment the final result. At the end of the billable period, this result resumes to 0."),(0,i.kt)("p",null,"This aggregation rule is very useful when you have to calculate a simple behavior."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"COUNT.event.code")),(0,i.kt)("h2",{id:"2-sum"},"2. SUM"),(0,i.kt)("p",null,"Sum a defined property for incoming events. During a billable period, each time a defined event is flowing in, Lago will sum the defined property. At the end of the billable period, this sum resumes to 0."),(0,i.kt)("p",null,"This aggregation type is very useful to sum the consumption, such as the ",(0,i.kt)("em",{parentName:"p"},"number of pageviews")," or the ",(0,i.kt)("em",{parentName:"p"},"number of gigabytes used"),", for instance."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"SUM(event.properties.property_name)")),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"As a ",(0,i.kt)("inlineCode",{parentName:"p"},"SUM")," returns a number, the single property you aggregate on ",(0,i.kt)("strong",{parentName:"p"},"must be numeric value"),"."))),(0,i.kt)("h2",{id:"3-max"},"3. MAX"),(0,i.kt)("p",null,"Get the maximum value of a defined property for incoming events. During a billable period, Lago will get the maximum value received for a defined property. At the end of the billable period, this value resumes to 0."),(0,i.kt)("p",null,"This aggregation is very useful to get the maximum usage of a feature, such as ",(0,i.kt)("em",{parentName:"p"},"the maximum number of rows")," or ",(0,i.kt)("em",{parentName:"p"},"the maximum compute time of a server"),", for instance."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"MAX(event.properties.property_name)")),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"As a ",(0,i.kt)("inlineCode",{parentName:"p"},"MAX")," returns a number, the single property you aggregate on ",(0,i.kt)("strong",{parentName:"p"},"must be numeric value"),"."))),(0,i.kt)("h2",{id:"4-count-distinct"},"4. COUNT DISTINCT"),(0,i.kt)("p",null,"Get the number of unique value of a defined property for incoming events. During a billable period, Lago will deduplicate the number of events received over a single property. At the end of the billable period, this value resumes to 0."),(0,i.kt)("p",null,"This aggregation is very useful to deduplicate, such as the ",(0,i.kt)("em",{parentName:"p"},"number of tracked users")," or ",(0,i.kt)("em",{parentName:"p"},"the number of active rows"),", for instance."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"COUNT_DISTINCT(event.properties.property_name)")))}c.isMDXComponent=!0}}]);